<md-dialog>
  <form>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2 translate>SETTINGS.TITLE</h2>
        <span flex></span>
      </div>
    </md-toolbar>
    <md-dialog-content style="max-width:97%;max-height:90%; ">
      <md-tabs md-dynamic-height md-border-bottom>
        <md-tab label="{{'SETTINGS.TABS.SETTINGS' | translate}}">
          <md-content class="md-padding">

            <md-list>

              <md-subheader class="md-no-sticky" translate>{{'SETTINGS.DISPLAY.TITLE' | translate}}</md-subheader>

              <md-list-item>
                <p translate>SETTINGS.DISPLAY.LANGUAGE.TITLE</p>

                <md-menu class="md-secondary">
                  <md-button ng-click="$mdMenu.open($event)">
                    {{local.langName | translate}}
                    <ng-md-icon class="menu-icon" icon="keyboard_arrow_down" size="30px" style="fill: black;"></ng-md-icon>
                  </md-button>
                  <md-menu-content width="4">
                    <md-menu-item ng-repeat="lang in languages">
                      <md-button ng-click="setLanguage(lang)">
                        {{lang.name | translate}}
                      </md-button>
                    </md-menu-item>
                  </md-menu-content>
                </md-menu>
              </md-list-item>


              <md-list-item>
                <p translate>SETTINGS.DISPLAY.DISTANCE</p>

                <md-menu class="md-secondary">
                  <md-button ng-click="$mdMenu.open($event)">
                    <span ng-if="local.settings.experiance.distanceUnits == 'M'">{{'HOME.MILES' | translate}}</span>
                    <span ng-if="local.settings.experiance.distanceUnits == 'K'">{{'HOME.KILOMETERS' | translate}}</span>
                    <ng-md-icon class="menu-icon" icon="keyboard_arrow_down" size="30px" style="fill: black;"></ng-md-icon>
                  </md-button>
                  <md-menu-content width="2">
                    <md-menu-item>
                      <md-button ng-click="setDistance('M')">
                        {{'HOME.MILES' | translate}}
                        <ng-md-icon ng-if="local.settings.experiance.distanceUnits == 'M'" class="menu-icon" icon="check" size="30px" style="fill: black;"></ng-md-icon>
                      </md-button>
                    </md-menu-item>
                    <md-menu-item>
                      <md-button ng-click="setDistance('K')">
                        {{'HOME.KILOMETERS' | translate}}
                        <ng-md-icon ng-if="local.settings.experiance.distanceUnits == 'K'" class="menu-icon" icon="check" size="30px" style="fill: black;"></ng-md-icon>
                      </md-button>
                    </md-menu-item>
                  </md-menu-content>
                </md-menu>
              </md-list-item>

              <md-list-item>
                <p translate>SETTINGS.DISPLAY.TEMP</p>
              <md-menu class="md-secondary">
                <md-button ng-click="$mdMenu.open($event)">
                  <span ng-if="local.settings.experiance.tempUnits == 'C'">{{'HOME.TEMPC' | translate}}</span>
                  <span ng-if="local.settings.experiance.tempUnits == 'F'">{{'HOME.TEMPF' | translate}}</span>
                  <ng-md-icon class="menu-icon" icon="keyboard_arrow_down" size="30px" style="fill: black;"></ng-md-icon>
                </md-button>
                <md-menu-content width="2">
                  <md-menu-item>
                    <md-button ng-click="setTemp('C')">
                      {{'HOME.TEMPC' | translate}}
                      <ng-md-icon ng-if="local.settings.experiance.tempUnits == 'C'" class="menu-icon" icon="check" size="30px" style="fill: black;"></ng-md-icon>
                    </md-button>
                  </md-menu-item>
                  <md-menu-item>
                    <md-button ng-click="setTemp('F')">
                      {{'HOME.TEMPF' | translate}}
                      <ng-md-icon ng-if="local.settings.experiance.tempUnits == 'F'" class="menu-icon" icon="check" size="30px" style="fill: black;"></ng-md-icon>
                    </md-button>
                  </md-menu-item>
                </md-menu-content>
              </md-menu>
            </md-list-item>

            <div ng-if="platform == 'Android'">
              <md-subheader class="md-no-sticky" translate>{{'SETTINGS.DARK_MODE.TITLE' | translate}}</md-subheader>
              <md-list-item >
                <p translate>SETTINGS.DARK_MODE.AMBIENT</p>
                <md-switch ng-model="local.settings.experiance.darkModeAmbient" ng-disabled="local.settings.experiance.darkModeHeadlights" aria-label="Dark Mode Ambient Light"></md-switch>
              </md-list-item>

              <md-list-item>
                <p translate>SETTINGS.DARK_MODE.AMBIENT_SENSITIVITY</p><br/>
                <md-slider flex min="0" max="10" md-discrete ng-disabled="!local.settings.experiance.darkModeAmbient || local.settings.experiance.darkModeHeadlights" ng-model="local.settings.experiance.lightSensitivity"></md-slider>
              </md-list-item>

              <md-list-item>
                <p translate>SETTINGS.DARK_MODE.DARK_HEADLIGHTS</p>
                <md-switch ng-model="local.settings.experiance.darkModeHeadlights" aria-label="Dark Mode Ambient Light"></md-switch>
              </md-list-item>
            </div>
              <md-subheader class="md-no-sticky">{{'SETTINGS.NOTIFICATIONS.TITLE' | translate}}</md-subheader>

              <md-list-item>
                <p translate>SETTINGS.NOTIFICATIONS.ENABLE_DEVICE</p>
                <md-switch ng-model="local.settings.notifications.enablePush"></md-switch>
              </md-list-item>

              <md-list-item>
                <p><span translate>SETTINGS.NOTIFICATIONS.TIRE_HIGH_THRESHOLD</span> ({{tireHighThreshold}})</p><br/>
                <md-slider flex min="30" max="48" md-discrete ng-model="tireHighThreshold"></md-slider>
              </md-list-item>

              <md-list-item>
                <p><span translate>SETTINGS.NOTIFICATIONS.TIRE_LOW_THRESHOLD</span> ({{tireLowThreshold}})</p><br/>
                <md-slider flex min="20" max="45" md-discrete ng-model="tireLowThreshold"></md-slider>
              </md-list-item>

              <md-list-item>
                <p><span translate>SETTINGS.NOTIFICATIONS.TIRE_DELTA_THRESHOLD</span> ({{local.settings.notifications.tireDeltaThreshold}})</p><br/>
                <md-slider flex min="0.5" max="5" md-discrete ng-model="local.settings.notifications.tireDeltaThreshold"></md-slider>
              </md-list-item>

              <md-subheader class="md-no-sticky">{{'SETTINGS.DISPLAY.TITLE' | translate}}</md-subheader>
              <md-list-item>
                <p>{{'SETTINGS.DISPLAY.EXTRA_DATA' | translate}}
                <br/><small translate>SETTINGS.DISPLAY.EXTRA_DATA_DETAIL</small></p>
                <md-switch ng-model="local.settings.experiance.displayAllData"></md-switch>
              </md-list-item>

              <md-list-item>
                <p>{{'SETTINGS.DISPLAY.EXTRA_LOGS' | translate}}
                <br/><small translate>SETTINGS.DISPLAY.EXTRA_LOGS_DETAIL</small></p>
                <md-switch ng-disabled="!local.settings.experimental.logOBDFile" ng-model="local.settings.experiance.displayLogs"></md-switch>
              </md-list-item>


              <md-subheader class="md-no-sticky">{{'SETTINGS.EXPERIMENTAL.TITLE' | translate}}</md-subheader>
              <md-list-item >
                <p>{{'SETTINGS.EXPERIMENTAL.SAVE_OBD' | translate}} <br/><small>/sdcard/Happy_Leaf/BETA/</small></p>
                <md-switch ng-model="local.settings.experimental.logOBDFile" aria-label="Debug Codes"></md-switch>
              </md-list-item>

              <md-list-item >
                <p>{{'SETTINGS.EXPERIMENTAL.SAVE_HISTORY' | translate}} <br/><small>/sdcard/Happy_Leaf/BETA/</small></p>
                <md-switch ng-model="local.settings.experimental.logHistoryFile" aria-label="Debug Codes"></md-switch>
              </md-list-item>

              <md-list-item >
                <p>{{'SETTINGS.EXPERIMENTAL.DEBUG_CODES' | translate}} <br/><small translate>SETTINGS.EXPERIMENTAL.DEBUG_EXPLAIN</small></p>
                <md-switch ng-model="local.settings.experimental.debugCodes" aria-label="Debug Codes"></md-switch>
              </md-list-item>

            </md-list>

          </md-content>
        </md-tab>
        <md-tab label="{{'SETTINGS.TABS.CONNECTION' | translate}}">
          <md-content class="md-padding">
            <md-list>

              <md-subheader class="md-no-sticky">{{'SETTINGS.WIFI.TITLE' | translate}}</md-subheader>

              <md-list-item>
                <p>{{'SETTINGS.WIFI.ALLOW' | translate}}</p>
                <md-switch ng-model="local.settings.wifi.allow"></md-switch>
              </md-list-item>


              <md-list-item>
                <md-input-container class="md-icon-float md-icon-right md-block">
                  <label>{{'SETTINGS.WIFI.IP' | translate}}</label>
                  <input ng-model="local.settings.wifi.ipaddress" type="text"></input>
                </md-input-container>
              </md-list-item>

              <md-list-item>
                <md-input-container class="md-icon-float md-icon-right md-block">
                  <label>{{'SETTINGS.WIFI.PORT' | translate}}</label>
                  <input ng-model="local.settings.wifi.port" type="number" step="1"></input>
                </md-input-container>
              </md-list-item>
            </md-list>
          </md-content>
        </md-tab>
        <md-tab label="{{'SETTINGS.TABS.DATA' | translate}}">
          <md-content class="md-padding">
            <h3 class="md-display-2" translate>SETTINGS.DATA.CLEAR</h3>
            <md-button class="md-raised md-warn" ng-click="clearHistory($event)">
              {{'SETTINGS.DATA.DELETE' | translate}}
            </md-button>
            <!--md-contact-chips
                ng-model="dataKeys"
                md-contacts="querySearch($query)"
                md-contact-name="name"
                md-require-match="true"
                md-highlight-flags="i"
                filter-selected="filterSelected"
                placeholder="Data to Graph">
            </md-contact-chips-->
          </md-content>
        </md-tab>
        <md-tab label="{{'SETTINGS.TABS.ABOUT' | translate}}">
          <md-content class="md-padding">
            <h1 class="md-display-2">Happy Leaf</h1>
            <hr/>
            <p>Happy Leaf Version {{local.settings.about.version}}</p>
            <p>Build with <ng-md-icon class="love-icon rotate" options='{"rotation": "counterclock"}' icon="{{loveIcon}}" size="35px" style="fill: black;"></ng-md-icon> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; by Brandon Martin</p>
            <p>Powered by Angular 1.5, Phonegap, and other open source technology</p>
            <big>Special thanks to <a href="http://www.mynissanleaf.com/">My Nissan Leaf Forums</a></br>And all the Happy Leaf Beta Testers!</big>
          </md-content>
        </md-tab>
      </md-tabs>
    </md-dialog-content>

    <!--md-dialog-actions layout="row">
      <md-button href="http://en.wikipedia.org/wiki/Mango" target="_blank" md-autofocus>
        More on Wikipedia
      </md-button>
      <span flex></span>
      <md-button ng-click="answer('not useful')" >
        Not Useful
      </md-button>
      <md-button ng-click="answer('useful')" style="margin-right:20px;" >
        Useful
      </md-button>
    </md-dialog-actions-->
  </form>
</md-dialog>
